<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>JSON | Microbot Team | MT-ryansuen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content>
    <meta name="description" content="JSON(JavaScript Object Notation)简介JSON是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯">
<meta property="og:type" content="article">
<meta property="og:title" content="JSON">
<meta property="og:url" content="https://ryansuen.github.io/2017/12/21/JSON/index.html">
<meta property="og:site_name" content="Microbot Team">
<meta property="og:description" content="JSON(JavaScript Object Notation)简介JSON是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2019-03-05T14:45:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSON">
<meta name="twitter:description" content="JSON(JavaScript Object Notation)简介JSON是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯">
    
        <link rel="alternate" type="application/atom+xml" title="Microbot Team" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Ryan Suen</h5>
          <a href="mailto:634206017@qq.com" title="634206017@qq.com" class="mail">634206017@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/yscoder" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/ysweb" target="_blank">
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/custom">
                <i class="icon icon-lg icon-link"></i>
                测试
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">JSON</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">JSON</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-20T22:11:34.000Z" itemprop="datePublished" class="page-time">
  2017-12-21
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSON-JavaScript-Object-Notation-简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">JSON(JavaScript Object Notation)简介</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#语法"><span class="post-toc-number">2.</span> <span class="post-toc-text">语法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#简单值"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">简单值</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#对象"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">对象</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#数组"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">数组</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#解析与序列化-javascript中的JSON对象"><span class="post-toc-number">3.</span> <span class="post-toc-text">解析与序列化(javascript中的JSON对象)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Javascript早期解析JSON"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Javascript早期解析JSON</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#javascript中的JSON对象"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">javascript中的JSON对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#JSON-parse"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">JSON.parse()</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#JSON-stringify"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">JSON.stringify()</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#例子-function"><span class="post-toc-number">3.2.2.1.</span> <span class="post-toc-text">例子(function)</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#例子-array"><span class="post-toc-number">3.2.2.2.</span> <span class="post-toc-text">例子(array)</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#space-参数"><span class="post-toc-number">3.2.2.3.</span> <span class="post-toc-text">space 参数</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#toJSON-方法"><span class="post-toc-number">3.2.2.4.</span> <span class="post-toc-text">toJSON 方法</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#JSON-stringify用作-JavaScript"><span class="post-toc-number">3.2.2.5.</span> <span class="post-toc-text">JSON.stringify用作 JavaScript</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#使用-JSON-stringify-结合-localStorage-的例子"><span class="post-toc-number">3.2.2.6.</span> <span class="post-toc-text">使用 JSON.stringify 结合 localStorage 的例子</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#复制对象"><span class="post-toc-number">3.2.2.7.</span> <span class="post-toc-text">复制对象</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Polyfill"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Polyfill</span></a></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-JSON" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">JSON</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-21 06:11:34" datetime="2017-12-20T22:11:34.000Z" itemprop="datePublished">2017-12-21</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h3 id="JSON-JavaScript-Object-Notation-简介"><a href="#JSON-JavaScript-Object-Notation-简介" class="headerlink" title="JSON(JavaScript Object Notation)简介"></a>JSON(JavaScript Object Notation)简介</h3><p>JSON是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。</p>
<p>JSON 数据格式与语言无关，脱胎于 JavaScript，但目前很多编程语言都支持 JSON 格式数据的生成和解析。JSON 的官方 MIME 类型是 application/json，文件扩展名是 .json。</p>
<p>JSON出现之前，XML一直是互联网传输结构化数据的标准。然而业界不少人认为XML过于烦琐，冗长。为了解决些问题JSON应机而生。</p>
<p>JSON与XML最大的不同在于XML是一个完整的标记语言，而JSON不是。这使得XML在程序判读上需要比较多的功夫。主要的原因在于XML的设计理念与JSON不同。XML利用标记语言的特性提供了绝佳的延展性（如XPath），在数据存储，扩展及高级检索方面具备对JSON的优势，而JSON则由于比XML更加小巧，以及浏览器的内建快速解析支持，使得其更适用于网络数据传输领域。</p>
<p>关于JSON，最重要的是理解它是一种数据格式，不是一种编程语言。虽然JSON与Javascript有几乎完全相似的语法形式，但JSON并不从属于Javascript。并非只有Javascript才使用JSON，很多语言都有针对JSON的解析器和序列化器。</p>
<p>它基于 JavaScript 语法，但与之不同：一些JavaScript不是JSON，一些JSON不是JavaScript。参考 JSON：<a href="http://timelessrepo.com/json-isnt-a-javascript-subset" target="_blank" rel="noopener">不是JavaScript 的子集</a>。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>JSON语法可以表示以下三种类型的值：</p>
<ul>
<li>简单值：使用与Javascript相同的语法，可以在JSON中表示字符串，数值，布尔值和null。注意JSON不支持Javascript中的特殊对象undefined.</li>
<li>对象：一个对象包含一系列无序的名称／值对(pair)，一个对象以{开始，并以}结束。每个名称／值对之间使用,分区。</li>
<li>一个数组是一个值(value)的集合，一个数组以[，并已]结束。值之间使用,分区。</li>
</ul>
<h4 id="简单值"><a href="#简单值" class="headerlink" title="简单值"></a>简单值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//数据值</span><br><span class="line">666</span><br><span class="line"></span><br><span class="line">//字符串</span><br><span class="line">“testing”</span><br></pre></td></tr></table></figure>
<p>JSON字符串与Javascript字符串最大的区别在于，JSON字符串必须使用双引号（单引号会导致语法错误）。</p>
<p>布尔值与null也是JSON的有效形式。实际应该用它们只是复杂的数据结构当中的一部分。</p>
<h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//Javascript</span><br><span class="line">var person = &#123;</span><br><span class="line">    name: &apos;ryan&apos;,</span><br><span class="line">    age: 6</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var person = &#123;</span><br><span class="line">    &quot;name&quot;: &quot;ryan&quot;,</span><br><span class="line">    &quot;age&quot;: 6</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//JSON</span><br><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;ryan&quot;,</span><br><span class="line">    &quot;age&quot;: 6</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>JSON中的对象要求给属性加双引号（不加或单引号都会导致语法错误）。</li>
<li>JSON当中没有变量的概念。</li>
<li>JSON没有末尾的分号。</li>
<li>JSON对象最后一个属性不可以有逗号。（对象中嵌套的对象也一样）</li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// javascript</span><br><span class="line">var array = [25, &quot;hello&quot;, &quot;world&quot;];</span><br><span class="line"></span><br><span class="line">//JSON</span><br><span class="line">[25, &quot;hello&quot;, &quot;world&quot;]</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        “name”: &quot;name1&quot;,</span><br><span class="line">        &quot;age&quot;: 1,</span><br><span class="line">        &quot;detail&quot;: &#123;</span><br><span class="line">            &quot;aaa&quot;: &quot;aaa&quot;,</span><br><span class="line">            &quot;bbb&quot;: &quot;bbb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        “name”: &quot;name2&quot;,</span><br><span class="line">        &quot;age&quot;: 2,</span><br><span class="line">        &quot;detail&quot;: &#123;</span><br><span class="line">            &quot;aaa&quot;: &quot;aaa&quot;,</span><br><span class="line">            &quot;bbb&quot;: &quot;bbb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        “name”: &quot;name3&quot;,</span><br><span class="line">        &quot;age&quot;: 3,</span><br><span class="line">        &quot;detail&quot;: &#123;</span><br><span class="line">            &quot;aaa&quot;: &quot;aaa&quot;,</span><br><span class="line">            &quot;bbb&quot;: &quot;bbb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        “name”: &quot;name4&quot;,</span><br><span class="line">        &quot;age&quot;: 4,</span><br><span class="line">        &quot;detail&quot;: &#123;</span><br><span class="line">            &quot;aaa&quot;: &quot;aaa&quot;,</span><br><span class="line">            &quot;bbb&quot;: &quot;bbb&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>数据也没有变量的概念</li>
<li>同样也没有分号</li>
</ul>
<h3 id="解析与序列化-javascript中的JSON对象"><a href="#解析与序列化-javascript中的JSON对象" class="headerlink" title="解析与序列化(javascript中的JSON对象)"></a>解析与序列化(javascript中的JSON对象)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//JSON使用</span><br><span class="line">books[2].title</span><br><span class="line"></span><br><span class="line">//XML</span><br><span class="line">doc.getElementsByTagName(&quot;book&quot;)[2].getAtrribute(&quot;title&quot;)</span><br></pre></td></tr></table></figure>
<p>从上也不难理解为什么JSON受开发人员欢迎。</p>
<h4 id="Javascript早期解析JSON"><a href="#Javascript早期解析JSON" class="headerlink" title="Javascript早期解析JSON"></a>Javascript早期解析JSON</h4><p>直接使用eval()对JSON数据进行中值。这样会存在风险，因可能会执行一些恶意代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//前端老人可能还用过如下方式：</span><br><span class="line">var json= eval(&quot;&#123;message:(function ()&#123; window.location=&apos;http://zh.wikipedia.org/wiki/JSON#.E5.AE.89.E5.85.A8.E6.80.A7.E5.95.8F.E9.A1.8C&apos;; &#125;)()&#125;&quot;);</span><br><span class="line"></span><br><span class="line">var json= eval(&quot;(&quot; + &quot;&#123;message:(function ()&#123; window.location=&apos;http://zh.wikipedia.org/wiki/JSON#.E5.AE.89.E5.85.A8.E6.80.A7.E5.95.8F.E9.A1.8C&apos;; &#125;)()&#125;&quot; + &quot;)&quot;);</span><br><span class="line"></span><br><span class="line">//上面解析的内容就非标准的JSON，存在恶意代码。</span><br></pre></td></tr></table></figure></p>
<h4 id="javascript中的JSON对象"><a href="#javascript中的JSON对象" class="headerlink" title="javascript中的JSON对象"></a>javascript中的JSON对象</h4><h5 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h5><ul>
<li>作用：解析一个JSON字符串，可选地转换生成的值及其属性，并返回值。</li>
<li><p>语法</p>
<ul>
<li>JSON.parse(text[, reviver])</li>
<li>参数<ul>
<li>text:要被解析成JavaScript值的字符串，查看 JSON 对象学习的JSON 语法的说明。</li>
<li>reviver [可选] 如果是一个函数，则规定了原始值如何被解析改造，在被返回之前。</li>
</ul>
</li>
<li>返回值: Object对应给定的JSON文本。</li>
<li>异常: 若被解析的 JSON 字符串是非法的，则会抛出 一个语法错误 异常。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">JSON.parse(&apos;&#123;&#125;&apos;);              // &#123;&#125;</span><br><span class="line">JSON.parse(&apos;true&apos;);            // true</span><br><span class="line">JSON.parse(&apos;&quot;foo&quot;&apos;);           // &quot;foo&quot;</span><br><span class="line">JSON.parse(&apos;[1, 5, &quot;false&quot;]&apos;); // [1, 5, &quot;false&quot;]</span><br><span class="line">JSON.parse(&apos;null&apos;);            // null</span><br><span class="line">JSON.parse(&apos;1&apos;);               //  1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>使用 reviver 函数<br>如果指定了 reviver 函数，则解析出的 JavaScript 值（解析值）会经过一次转换后才将被最终返回（返回值）。更具体点讲就是：解析值本身以及它所包含的所有属性，会按照一定的顺序（从最最里层的属性开始，一级级往外，最终到达顶层，也就是解析值本身）分别的去调用 reviver 函数，在调用过程中，当前属性所属的对象会作为 this 值，当前属性名和属性值会分别作为第一个和第二个参数传入 reviver 中。如果 reviver 返回 undefined，则当前属性会从所属对象中删除，如果返回了其他值，则返回的值会成为当前属性新的属性值。</p>
</li>
</ul>
<p>当遍历到最顶层的值（解析值）时，传入 reviver 函数的参数会是空字符串 “”（因为此时已经没有真正的属性）和当前的解析值（有可能已经被修改过了），当前的 this 值会是 {“”: 修改过的解析值}，在编写 reviver 函数时，要注意到这个特例。（这个函数的遍历顺序依照：从最内层开始，按照层级顺序，依次向外遍历）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">JSON.parse(&apos;&#123;&quot;p&quot;: 5&#125;&apos;, function (k, v) &#123;</span><br><span class="line">    if(k === &apos;&apos;) return v;     // 如果到了最顶层，则直接返回属性值，</span><br><span class="line">    return v * 2;              // 否则将属性值变为原来的 2 倍。</span><br><span class="line">&#125;);                            // &#123; p: 10 &#125;</span><br><span class="line"></span><br><span class="line">JSON.parse(&apos;&#123;&quot;1&quot;: 1, &quot;2&quot;: 2,&quot;3&quot;: &#123;&quot;4&quot;: 4, &quot;5&quot;: &#123;&quot;6&quot;: 6&#125;&#125;&#125;&apos;, function (k, v) &#123;</span><br><span class="line">    console.log(k); // 输出当前的属性名，从而得知遍历顺序是从内向外的，</span><br><span class="line">                    // 最后一个属性名会是个空字符串。</span><br><span class="line">    return v;       // 返回原始属性值，相当于没有传递 reviver 参数。</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 1</span><br><span class="line">// 2</span><br><span class="line">// 4</span><br><span class="line">// 6</span><br><span class="line">// 5</span><br><span class="line">// 3 </span><br><span class="line">// &quot;&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>JSON.parse() 不允许用逗号作为结尾<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// both will throw a SyntaxError</span><br><span class="line">JSON.parse(&quot;[1, 2, 3, 4, ]&quot;);</span><br><span class="line">JSON.parse(&apos;&#123;&quot;foo&quot; : 1, &#125;&apos;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h5><ul>
<li><p>作用：返回与指定值相对应的一个JSON字符串，可选地仅包含某些属性或以用户定义的方式替换属性值。</p>
</li>
<li><p>语法：JSON.stringify(value[, replacer [, space]])</p>
</li>
<li>参数<ul>
<li>value： 将要序列化成 一个JSON 字符串的值。</li>
<li>replacer 【可选】：如果该参数是一个函数，则在序列化过程中，被序列化的值的每个属性都会经过该函数的转换和处理；如果该参数是一个数组，则只有包含在这个数组中的属性名才会被序列化到最终的 JSON 字符串中；如果该参数为null或者未提供，则对象所有的属性都会被序列化；关于该参数更详细的解释和示例，请参考使用原生的 JSON 对象一文。</li>
<li>space 【可选】：指定缩进用的空白字符串，用于美化输出（pretty-print）；如果参数是个数字，它代表有多少的空格；上限为10。该值若小于1，则意味着没有空格；如果该参数为字符串(字符串的前十个字母)，该字符串将被作为空格；如果该参数没有提供（或者为null）将没有空格。</li>
</ul>
</li>
<li><p>返回值： 一个表示给定值的JSON字符串。</p>
</li>
<li><p>关于序列化，有下面五点注意事项：</p>
<ul>
<li>非数组对象的属性不能保证以特定的顺序出现在序列化后的字符串中。</li>
<li>布尔值、数字、字符串的包装对象在序列化过程中会自动转换成对应的原始值。</li>
<li>undefined、任意的函数以及 symbol 值，在序列化过程中会被忽略（出现在非数组对象的属性值中时）或者被转换成 null（出现在数组中时）。</li>
<li>所有以 symbol 为属性键的属性都会被完全忽略掉，即便 replacer 参数中强制指定包含了它们。</li>
<li>不可枚举的属性会被忽略<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">JSON.stringify(&#123;&#125;);                        // &apos;&#123;&#125;&apos;</span><br><span class="line">JSON.stringify(true);                      // &apos;true&apos;</span><br><span class="line">JSON.stringify(&quot;foo&quot;);                     // &apos;&quot;foo&quot;&apos;</span><br><span class="line">JSON.stringify([1, &quot;false&quot;, false]);       // &apos;[1,&quot;false&quot;,false]&apos;</span><br><span class="line">JSON.stringify(&#123; x: 5 &#125;);                  // &apos;&#123;&quot;x&quot;:5&#125;&apos;</span><br><span class="line"></span><br><span class="line">JSON.stringify(&#123;x: 5, y: 6&#125;);              </span><br><span class="line">// &quot;&#123;&quot;x&quot;:5,&quot;y&quot;:6&#125;&quot;</span><br><span class="line"></span><br><span class="line">JSON.stringify([new Number(1), new String(&quot;false&quot;), new Boolean(false)]); </span><br><span class="line">// &apos;[1,&quot;false&quot;,false]&apos;</span><br><span class="line"></span><br><span class="line">JSON.stringify(&#123;x: undefined, y: Object, z: Symbol(&quot;&quot;)&#125;); </span><br><span class="line">// &apos;&#123;&#125;&apos;</span><br><span class="line"></span><br><span class="line">JSON.stringify([undefined, Object, Symbol(&quot;&quot;)]);          </span><br><span class="line">// &apos;[null,null,null]&apos; </span><br><span class="line"></span><br><span class="line">JSON.stringify(&#123;[Symbol(&quot;foo&quot;)]: &quot;foo&quot;&#125;);                 </span><br><span class="line">// &apos;&#123;&#125;&apos;</span><br><span class="line"></span><br><span class="line">JSON.stringify(&#123;[Symbol.for(&quot;foo&quot;)]: &quot;foo&quot;&#125;, [Symbol.for(&quot;foo&quot;)]);</span><br><span class="line">// &apos;&#123;&#125;&apos;</span><br><span class="line"></span><br><span class="line">JSON.stringify(</span><br><span class="line">    &#123;[Symbol.for(&quot;foo&quot;)]: &quot;foo&quot;&#125;, </span><br><span class="line">    function (k, v) &#123;</span><br><span class="line">        if (typeof k === &quot;symbol&quot;)&#123;</span><br><span class="line">            return &quot;a symbol&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// undefined </span><br><span class="line"></span><br><span class="line">// 不可枚举的属性默认会被忽略：</span><br><span class="line">JSON.stringify( </span><br><span class="line">    Object.create(</span><br><span class="line">        null, </span><br><span class="line">        &#123; </span><br><span class="line">            x: &#123; value: &apos;x&apos;, enumerable: false &#125;, </span><br><span class="line">            y: &#123; value: &apos;y&apos;, enumerable: true &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// &quot;&#123;&quot;y&quot;:&quot;y&quot;&#125;&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>replacer参数</p>
</li>
</ul>
<p>eplacer参数可以是一个函数或者一个数组。作为函数，它有两个参数，键(key)值(value)都会被序列化。</p>
<pre><code>1. 如果返回一个 Number, 转换成相应的字符串被添加入JSON字符串。
2. 如果返回一个 String, 该字符串作为属性值被添加入JSON。
3. 如果返回一个 Boolean, &quot;true&quot; 或者 &quot;false&quot;被作为属性值被添加入JSON字符串。
4. 如果返回任何其他对象，该对象递归地序列化成JSON字符串，对每个属性调用replaceer方法。除非该对象是一个函数，这种情况将不会被序列化成JSON字符串。
5. 如果返回undefined，该属性值不会在JSON字符串中输出。
</code></pre><p>注意: 不能用replacer方法，从数组中移除值(values)，如若返回undefined或者一个函数，将会被null取代。</p>
<h6 id="例子-function"><a href="#例子-function" class="headerlink" title="例子(function)"></a>例子(function)</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function replacer(key, value) &#123;</span><br><span class="line">  if (typeof value === &quot;string&quot;) &#123;</span><br><span class="line">    return undefined;</span><br><span class="line">  &#125;</span><br><span class="line">  return value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var foo = &#123;foundation: &quot;Mozilla&quot;, model: &quot;box&quot;, week: 45, transport: &quot;car&quot;, month: 7&#125;;</span><br><span class="line">var jsonString = JSON.stringify(foo, replacer);</span><br><span class="line">//JSON序列化结果为 &#123;&quot;week&quot;:45,&quot;month&quot;:7&#125;.</span><br></pre></td></tr></table></figure>
<h6 id="例子-array"><a href="#例子-array" class="headerlink" title="例子(array)"></a>例子(array)</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//如果replacer是一个数组，数组的值代表将被序列化成JSON字符串的属性名。</span><br><span class="line">JSON.stringify(foo, [&apos;week&apos;, &apos;month&apos;]);  </span><br><span class="line">// &apos;&#123;&quot;week&quot;:45,&quot;month&quot;:7&#125;&apos;, 只保留“week”和“month”属性值。</span><br></pre></td></tr></table></figure>
<h6 id="space-参数"><a href="#space-参数" class="headerlink" title="space 参数"></a>space 参数</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//space 参数用来控制结果字符串里面的间距。如果是一个数字, 则在字符串化时每一级别会比上一级别缩进多这个数字值的空格（最多10个空格）；如果是一个字符串，则每一级别会比上一级别多缩进用该字符串（或该字符串的前十个字符）。</span><br><span class="line">JSON.stringify(&#123; a: 2 &#125;, null, &quot; &quot;);   // &apos;&#123;\n &quot;a&quot;: 2\n&#125;&apos;</span><br><span class="line"></span><br><span class="line">//使用制表符（\t）来缩进：</span><br><span class="line">JSON.stringify(&#123; uno: 1, dos : 2 &#125;, null, &apos;\t&apos;)</span><br><span class="line">// &apos;&#123;            \</span><br><span class="line">//     &quot;uno&quot;: 1, \</span><br><span class="line">//     &quot;dos&quot;: 2  \</span><br><span class="line">// &#125;&apos;</span><br></pre></td></tr></table></figure>
<h6 id="toJSON-方法"><a href="#toJSON-方法" class="headerlink" title="toJSON 方法"></a>toJSON 方法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//如果一个被序列化的对象拥有 toJSON 方法，那么该 toJSON 方法就会覆盖该对象默认的序列化行为：不是那个对象被序列化，而是调用 toJSON 方法后的返回值会被序列化，例如：</span><br><span class="line">var obj = &#123;</span><br><span class="line">  foo: &apos;foo&apos;,</span><br><span class="line">  toJSON: function () &#123;</span><br><span class="line">    return &apos;bar&apos;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">JSON.stringify(obj);      // &apos;&quot;bar&quot;&apos;</span><br><span class="line">JSON.stringify(&#123;x: obj&#125;); // &apos;&#123;&quot;x&quot;:&quot;bar&quot;&#125;&apos;</span><br></pre></td></tr></table></figure>
<h6 id="JSON-stringify用作-JavaScript"><a href="#JSON-stringify用作-JavaScript" class="headerlink" title="JSON.stringify用作 JavaScript"></a>JSON.stringify用作 JavaScript</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//注意JSON不是javascript严格意义上的子集，在JSON中不需要省略两条终线(Line separator和Paragraph separator)但在JavaScript中需要被省略。因此，如果JSON被用作JSONP时，下面方法可以使用：</span><br><span class="line">function jsFriendlyJSONStringify (s) &#123;</span><br><span class="line">    return JSON.stringify(s).</span><br><span class="line">        replace(/\u2028/g, &apos;\\u2028&apos;).</span><br><span class="line">        replace(/\u2029/g, &apos;\\u2029&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var s = &#123;</span><br><span class="line">    a: String.fromCharCode(0x2028),</span><br><span class="line">    b: String.fromCharCode(0x2029)</span><br><span class="line">&#125;;</span><br><span class="line">try &#123;</span><br><span class="line">    eval(&apos;(&apos; + JSON.stringify(s) + &apos;)&apos;);</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    console.log(e); // &quot;SyntaxError: unterminated string literal&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// No need for a catch</span><br><span class="line">eval(&apos;(&apos; + jsFriendlyJSONStringify(s) + &apos;)&apos;);</span><br><span class="line"></span><br><span class="line">// console.log in Firefox unescapes the Unicode if</span><br><span class="line">//   logged to console, so we use alert</span><br><span class="line">alert(jsFriendlyJSONStringify(s)); // &#123;&quot;a&quot;:&quot;\u2028&quot;,&quot;b&quot;:&quot;\u2029&quot;&#125;</span><br></pre></td></tr></table></figure>
<h6 id="使用-JSON-stringify-结合-localStorage-的例子"><a href="#使用-JSON-stringify-结合-localStorage-的例子" class="headerlink" title="使用 JSON.stringify 结合 localStorage 的例子"></a>使用 JSON.stringify 结合 localStorage 的例子</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//一些时候，你想存储用户创建的一个对象，并且，即使在浏览器被关闭后仍能恢复该对象。下面的例子是 JSON.stringify 适用于这种情形的一个样板：</span><br><span class="line">// 创建一个示例数据</span><br><span class="line">var session = &#123;</span><br><span class="line">    &apos;screens&apos; : [],</span><br><span class="line">    &apos;state&apos; : true</span><br><span class="line">&#125;;</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenA&quot;, &quot;width&quot;:450, &quot;height&quot;:250&#125;);</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenB&quot;, &quot;width&quot;:650, &quot;height&quot;:350&#125;);</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenC&quot;, &quot;width&quot;:750, &quot;height&quot;:120&#125;);</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenD&quot;, &quot;width&quot;:250, &quot;height&quot;:60&#125;);</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenE&quot;, &quot;width&quot;:390, &quot;height&quot;:120&#125;);</span><br><span class="line">session.screens.push(&#123;&quot;name&quot;:&quot;screenF&quot;, &quot;width&quot;:1240, &quot;height&quot;:650&#125;);</span><br><span class="line"></span><br><span class="line">// 使用 JSON.stringify 转换为 JSON 字符串</span><br><span class="line">// 然后使用 localStorage 保存在 session 名称里</span><br><span class="line">localStorage.setItem(&apos;session&apos;, JSON.stringify(session));</span><br><span class="line"></span><br><span class="line">// 然后是如何转换通过 JSON.stringify 生成的字符串，该字符串以 JSON 格式保存在 localStorage 里</span><br><span class="line">var restoredSession = JSON.parse(localStorage.getItem(&apos;session&apos;));</span><br><span class="line"></span><br><span class="line">// 现在 restoredSession 包含了保存在 localStorage 里的对象</span><br><span class="line">console.log(restoredSession);</span><br></pre></td></tr></table></figure>
<h6 id="复制对象"><a href="#复制对象" class="headerlink" title="复制对象"></a>复制对象</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123;a: 123, b: 234&#125;;</span><br><span class="line">var b = JSON.parse(JSON.stringify(a));</span><br><span class="line">console.log(a === b);   //false</span><br></pre></td></tr></table></figure>
<h4 id="Polyfill"><a href="#Polyfill" class="headerlink" title="Polyfill"></a>Polyfill</h4><p>JSON对象不被旧版本浏览器支持。你可以把下面代码放到脚本的开始位置，这样就可以在那些没有原生支持 JSON 对象的浏览器（如IE6）中使用 JSON对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">if (!window.JSON) &#123;</span><br><span class="line">  window.JSON = &#123;</span><br><span class="line">    parse: function(sJSON) &#123; return eval(&apos;(&apos; + sJSON + &apos;)&apos;); &#125;,</span><br><span class="line">    stringify: (function () &#123;</span><br><span class="line">      var toString = Object.prototype.toString;</span><br><span class="line">      var isArray = Array.isArray || function (a) &#123; return toString.call(a) === &apos;[object Array]&apos;; &#125;;</span><br><span class="line">      var escMap = &#123;&apos;&quot;&apos;: &apos;\\&quot;&apos;, &apos;\\&apos;: &apos;\\\\&apos;, &apos;\b&apos;: &apos;\\b&apos;, &apos;\f&apos;: &apos;\\f&apos;, &apos;\n&apos;: &apos;\\n&apos;, &apos;\r&apos;: &apos;\\r&apos;, &apos;\t&apos;: &apos;\\t&apos;&#125;;</span><br><span class="line">      var escFunc = function (m) &#123; return escMap[m] || &apos;\\u&apos; + (m.charCodeAt(0) + 0x10000).toString(16).substr(1); &#125;;</span><br><span class="line">      var escRE = /[\\&quot;\u0000-\u001F\u2028\u2029]/g;</span><br><span class="line">      return function stringify(value) &#123;</span><br><span class="line">        if (value == null) &#123;</span><br><span class="line">          return &apos;null&apos;;</span><br><span class="line">        &#125; else if (typeof value === &apos;number&apos;) &#123;</span><br><span class="line">          return isFinite(value) ? value.toString() : &apos;null&apos;;</span><br><span class="line">        &#125; else if (typeof value === &apos;boolean&apos;) &#123;</span><br><span class="line">          return value.toString();</span><br><span class="line">        &#125; else if (typeof value === &apos;object&apos;) &#123;</span><br><span class="line">          if (typeof value.toJSON === &apos;function&apos;) &#123;</span><br><span class="line">            return stringify(value.toJSON());</span><br><span class="line">          &#125; else if (isArray(value)) &#123;</span><br><span class="line">            var res = &apos;[&apos;;</span><br><span class="line">            for (var i = 0; i &lt; value.length; i++)</span><br><span class="line">              res += (i ? &apos;, &apos; : &apos;&apos;) + stringify(value[i]);</span><br><span class="line">            return res + &apos;]&apos;;</span><br><span class="line">          &#125; else if (toString.call(value) === &apos;[object Object]&apos;) &#123;</span><br><span class="line">            var tmp = [];</span><br><span class="line">            for (var k in value) &#123;</span><br><span class="line">              if (value.hasOwnProperty(k))</span><br><span class="line">                tmp.push(stringify(k) + &apos;: &apos; + stringify(value[k]));</span><br><span class="line">            &#125;</span><br><span class="line">            return &apos;&#123;&apos; + tmp.join(&apos;, &apos;) + &apos;&#125;&apos;;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return &apos;&quot;&apos; + value.toString().replace(escRE, escFunc) + &apos;&quot;&apos;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)()</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>众所周知，更复杂的JSON对象 polyfills 是[clarinet]<a href="https://github.com/dscape/clarinet()" target="_blank" rel="noopener">https://github.com/dscape/clarinet()</a><br><a href="http://oboejs.com/" target="_blank" rel="noopener">Oboe.js</a> <a href="https://github.com/douglascrockford/JSON-js" target="_blank" rel="noopener">JSON2</a> 和 <a href="https://bestiejs.github.io/json3/" target="_blank" rel="noopener">JSON3</a>。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-03-05T14:45:54.000Z" itemprop="dateUpdated">2019-03-05 22:45:54</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2017/12/21/JSON/" target="_blank" rel="external">https://ryansuen.github.io/2017/12/21/JSON/</a>
        
    </div>
    
    <footer>
        <a href="https://ryansuen.github.io">
            <img src="/img/avatar.jpg" alt="Ryan Suen">
            Ryan Suen
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ryansuen.github.io/2017/12/21/JSON/&title=《JSON》 — Microbot Team&pic=https://ryansuen.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ryansuen.github.io/2017/12/21/JSON/&title=《JSON》 — Microbot Team&source=description" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ryansuen.github.io/2017/12/21/JSON/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JSON》 — Microbot Team&url=https://ryansuen.github.io/2017/12/21/JSON/&via=https://ryansuen.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ryansuen.github.io/2017/12/21/JSON/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/01/21/performance/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">performance</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/11/20/深入理解javascript事件/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">深入理解javascript事件</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Ryan Suen &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://ryansuen.github.io/2017/12/21/JSON/&title=《JSON》 — Microbot Team&pic=https://ryansuen.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://ryansuen.github.io/2017/12/21/JSON/&title=《JSON》 — Microbot Team&source=description" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://ryansuen.github.io/2017/12/21/JSON/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JSON》 — Microbot Team&url=https://ryansuen.github.io/2017/12/21/JSON/&via=https://ryansuen.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://ryansuen.github.io/2017/12/21/JSON/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKElEQVR42u3aW07EMAwF0Nn/pocFoFS+dkBqcvKFmHaaUyTjRz6f8vr+WqtPV9f/vuv5KZ+/WBgYGK9lfB9Xyljd1QNX9oaBgXEPYxXBVtesHpm+oPS5y99jYGBgPF5TD7irb149CwMDA2MecOvf8xxqn18EBgYGRr2IrYTR9Nsqr29zLY6BgfFCRr3r/v8//8l8AwMD41WMb7gmvHSEGewKAwPjaEY9wKWYtMU2AWNgYNzMqJegvQ31Bgml7BUDA+M4Rv2G9AHp8a9t6SYGBsZBjDQg1kebk2MW8QgBAwPjAka63d4RrnT0WAm1GBgYNzDSww31YxZpSK0f3QjcGBgYBzHSAcCGZG6QhpaehYGBcRAjbd/3StZ6ty9NTzEwMG5jTDbUC7i9IcSyfMXAwDiakYbaelFaD+iVxHF0tAIDA+O1jEpoq5eyaXrXC/rLHWJgYBzKqKeAE0y6xXhhYGBcwEjbYZUEbvQfIE0TMTAwjmakRemk1Nwbypd/EwwMjKMZzwlcr3GWNukqqeTyRWBgYFzAqMSuXnk8wddfIgYGxm2MSfnaC6mT3hoGBsbZjG+40gMZk8Mc23JbDAyMlzN2TQnTTdfbdnHTDQMD41BGvd1WH1hO0s1m4oiBgXEBI22Z1Vtj9RRz1MjDwMDACIPvfOQQF7EYGBgYLdKu2rrUBMTAwLiA0TsW1ituU8DmdhsGBsYLGb3SMQ3Hk6Nm2waZGBgY72P8AH0VS6mVBEeAAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
